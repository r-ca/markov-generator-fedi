{% extends "base.html" %}

{% block title %}処理中 - マルコフ連鎖ジェネレーター for Fediverse{% endblock %}

{% block content %}
<div class="job-content">
    <div class="job-icon waiting">
        <i class="bi bi-gear-fill spin"></i>
    </div>
    <div class="job-title">学習中です...</div>
    
    {% if d['progress'] == 100 %}
    <div class="progress-text">処理を完了しています</div>
    <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
    {% else %}
    <div class="progress-text">{{ d['progress_str'] }}</div>
    <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: {{ d['progress'] }}%" aria-valuenow="{{ d['progress'] }}" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
    <div class="mt-3">
        <small class="text-muted">このページは自動で更新されます</small>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
    window.onload = function () {
        setInterval(function() {
            location.reload();
        }, 3000);
    }
</script>
{% endblock %}
